<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <title>МИР АЭС | Карта атомных электростанций</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap" rel="stylesheet">
</head>
<body class="dark-theme">
    <!-- Шапка для мобильных -->
    <div class="mobile-header" id="mobile-header">
        <div class="mobile-header-top">
            <div class="mobile-brand">
                <div class="mobile-logo">
                    <div class="atom-core"></div>
                    <div class="electron electron-1"></div>
                    <div class="electron electron-2"></div>
                    <div class="electron electron-3"></div>
                </div>
                <span class="mobile-title">МИР АЭС</span>
            </div>
            <div class="mobile-clock-small">
                <span id="mobile-time-small">00:00</span>
            </div>
        </div>
        
        <div class="mobile-controls-row">
            <button class="mobile-control-btn" id="mobile-search-btn">
                <i class="fas fa-search"></i>
                <span>Поиск</span>
            </button>
            <button class="mobile-control-btn" id="mobile-filters-top-btn">
                <i class="fas fa-filter"></i>
                <span>Фильтры</span>
            </button>
            <button class="mobile-control-btn" id="mobile-stats-btn">
                <i class="fas fa-chart-bar"></i>
                <span>Статистика</span>
            </button>
            <button class="mobile-control-btn" id="mobile-menu-btn">
                <i class="fas fa-bars"></i>
                <span>Меню</span>
            </button>
        </div>
    </div>

    <!-- Шапка для десктопов -->
    <header class="desktop-header" id="desktop-header">
        <div class="header-left">
            <div class="brand-section">
                <div class="logo-container">
                    <div class="atom-logo">
                        <div class="atom-core"></div>
                        <div class="electron electron-1"></div>
                        <div class="electron electron-2"></div>
                        <div class="electron electron-3"></div>
                    </div>
                </div>
                <h1 class="brand-title">МИР АЭС</h1>
            </div>
        </div>
        
        <div class="header-center">
            <div class="nav-buttons">
                <button class="nav-btn active" id="map-mode">
                    <i class="fas fa-map"></i>
                    <span>КАРТА</span>
                </button>
                <button class="nav-btn" id="stats-mode">
                    <i class="fas fa-chart-bar"></i>
                    <span>СТАТИСТИКА</span>
                </button>
            </div>
            
            <div class="search-container">
                <div class="search-box">
                    <i class="fas fa-search"></i>
                    <input type="text" id="desktop-search" placeholder="Поиск АЭС...">
                    <div class="search-results" id="desktop-search-results"></div>
                </div>
            </div>
            
            <div class="legend">
                <div class="legend-item">
                    <div class="legend-color operational"></div>
                    <span>Работает</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color stopped"></div>
                    <span>Остановлен</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color construction"></div>
                    <span>Строится</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color closed"></div>
                    <span>Закрыт</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color abandoned"></div>
                    <span>Заброшена</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color accident"></div>
                    <span>Авария</span>
                </div>
            </div>
        </div>
        
        <div class="header-right">
            <a href="https://t.me/WorldNPP" target="_blank" class="telegram-btn">
                <i class="fab fa-telegram"></i>
            </a>
            
            <div class="vfd-clock">
                <div class="digit-container">
                    <span class="hours">00</span>
                    <span class="clock-colon">:</span>
                    <span class="minutes">00</span>
                    <span class="clock-colon">:</span>
                    <span class="seconds">00</span>
                </div>
                <div class="clock-label" id="current-date">--/--/----</div>
            </div>
            
            <div class="map-controls">
                <button class="control-btn" id="toggle-filters-desktop">
                    <i class="fas fa-filter"></i>
                </button>
                <button class="control-btn active" id="street-layer">
                    <i class="fas fa-map"></i>
                </button>
                <button class="control-btn" id="satellite-layer">
                    <i class="fas fa-satellite"></i>
                </button>
                <button class="control-btn" id="theme-toggle">
                    <i class="fas fa-moon"></i>
                </button>
            </div>
        </div>
    </header>

    <!-- Панель фильтров -->
    <div class="filters-panel" id="filters-panel">
        <div class="filters-header">
            <h3><i class="fas fa-filter"></i> Фильтры</h3>
            <button class="close-filters" id="close-filters">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <div class="filters-content">
            <div class="filter-section">
                <div class="filter-title">СТРАНЫ</div>
                <div class="filter-options" id="country-filters">
                    <!-- Фильтры по странам будут добавлены через JS -->
                </div>
            </div>
            
            <div class="filter-section">
                <div class="filter-title">СТАТУС АЭС</div>
                <div class="filter-options" id="status-filters">
                    <!-- Фильтры по статусу будут добавлены через JS -->
                </div>
            </div>
            
            <div class="filter-section">
                <div class="filter-title">ТИП РЕАКТОРА</div>
                <div class="filter-options" id="type-filters">
                    <!-- Фильтры по типу реактора будут добавлены через JS -->
                </div>
            </div>
        </div>
        
        <div class="filters-footer">
            <button class="filter-btn secondary" id="reset-filters">
                СБРОСИТЬ
            </button>
            <button class="filter-btn primary" id="apply-filters">
                ПРИМЕНИТЬ
            </button>
        </div>
    </div>

    <!-- Мобильное меню -->
    <div class="mobile-menu-overlay" id="mobile-menu-overlay"></div>
    <div class="mobile-menu" id="mobile-menu">
        <div class="menu-header">
            <div class="menu-brand">
                <div class="menu-logo">
                    <div class="atom-core"></div>
                </div>
                <h3>Меню</h3>
            </div>
            <button class="close-menu" id="close-menu">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <div class="menu-clock">
            <div class="menu-time" id="menu-time">00:00:00</div>
            <div class="menu-date" id="menu-date">--/--/----</div>
        </div>
        
        <div class="menu-items">
            <button class="menu-item" id="menu-layers-btn">
                <i class="fas fa-layer-group"></i>
                <span>Слои карты</span>
                <i class="fas fa-chevron-right"></i>
            </button>
            
            <button class="menu-item" id="menu-theme-btn">
                <i class="fas fa-moon"></i>
                <span>Тёмная тема</span>
                <i class="fas fa-toggle-on"></i>
            </button>
            
            <a href="https://t.me/WorldNPP" target="_blank" class="menu-item">
                <i class="fab fa-telegram"></i>
                <span>Telegram канал</span>
                <i class="fas fa-external-link-alt"></i>
            </a>
            
            <button class="menu-item" id="menu-about-btn">
                <i class="fas fa-info-circle"></i>
                <span>О проекте</span>
                <i class="fas fa-chevron-right"></i>
            </button>
        </div>
    </div>

    <!-- Модальное окно поиска для мобильных -->
    <div class="mobile-search-modal" id="mobile-search-modal">
        <div class="search-modal-header">
            <div class="search-input-container">
                <i class="fas fa-search"></i>
                <input type="text" id="mobile-search-input" placeholder="Введите название АЭС или город..." autocomplete="off">
                <button class="clear-search" id="clear-mobile-search">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <button class="close-search-modal" id="close-search-modal">
                Отмена
            </button>
        </div>
        
        <div class="search-results-container" id="mobile-search-results">
            <!-- Результаты поиска -->
        </div>
    </div>

    <!-- Модальное окно слоев -->
    <div class="layers-modal" id="layers-modal">
        <div class="modal-header">
            <h3><i class="fas fa-layer-group"></i> Слои карты</h3>
            <button class="close-modal" id="close-layers-modal">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="modal-body">
            <button class="layer-option active" data-layer="street">
                <div class="layer-option-content">
                    <i class="fas fa-map"></i>
                    <div class="layer-info">
                        <span class="layer-name">Схема</span>
                        <span class="layer-desc">Карта местности</span>
                    </div>
                </div>
                <div class="layer-check">
                    <i class="fas fa-check"></i>
                </div>
            </button>
            
            <button class="layer-option" data-layer="satellite">
                <div class="layer-option-content">
                    <i class="fas fa-satellite"></i>
                    <div class="layer-info">
                        <span class="layer-name">Спутник</span>
                        <span class="layer-desc">Спутниковые снимки</span>
                    </div>
                </div>
                <div class="layer-check">
                    <i class="fas fa-check"></i>
                </div>
            </button>
        </div>
    </div>

    <!-- Карта -->
    <div class="map-container" id="map-container">
        <div id="map"></div>
        
        <!-- Кнопка закрытия панели для мобильных -->
        <button class="close-sidepanel-btn" id="close-sidepanel-btn">
            <i class="fas fa-times"></i>
        </button>
    </div>

    <!-- Легенда для мобильных -->
    <div class="mobile-legend-container">
        <div class="mobile-legend-scroll">
            <div class="legend-item">
                <div class="legend-color operational"></div>
                <span>Работает</span>
            </div>
            <div class="legend-item">
                <div class="legend-color stopped"></div>
                <span>Остановлен</span>
            </div>
            <div class="legend-item">
                <div class="legend-color construction"></div>
                <span>Строится</span>
            </div>
            <div class="legend-item">
                <div class="legend-color closed"></div>
                <span>Закрыт</span>
            </div>
            <div class="legend-item">
                <div class="legend-color abandoned"></div>
                <span>Заброшена</span>
            </div>
            <div class="legend-item">
                <div class="legend-color accident"></div>
                <span>Авария</span>
            </div>
        </div>
    </div>

    <!-- Панель информации об АЭС -->
    <div class="station-panel" id="station-panel">
        <div class="station-panel-content">
            <!-- Заголовок -->
            <div class="panel-header" id="panel-header">
                <div class="station-header-info">
                    <h2 class="station-name" id="panel-station-name">Выберите АЭС</h2>
                    <div class="station-status-badge" id="panel-status-badge">—</div>
                </div>
                <button class="panel-close-btn" id="panel-close-btn">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <!-- Вкладки -->
            <div class="panel-tabs">
                <button class="panel-tab active" data-tab="overview">
                    <i class="fas fa-info-circle"></i>
                    <span>Обзор</span>
                </button>
                <button class="panel-tab" data-tab="units">
                    <i class="fas fa-bolt"></i>
                    <span>Энергоблоки</span>
                </button>
                <button class="panel-tab" data-tab="history">
                    <i class="fas fa-history"></i>
                    <span>История</span>
                </button>
                <button class="panel-tab" data-tab="facts">
                    <i class="fas fa-star"></i>
                    <span>Факты</span>
                </button>
            </div>
            
            <!-- Контент вкладок -->
            <div class="panel-content">
                <!-- Вкладка Обзор -->
                <div class="tab-content active" id="overview-tab">
                    <div class="stats-cards">
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-bolt"></i>
                            </div>
                            <div class="stat-info">
                                <div class="stat-value" id="total-capacity">—</div>
                                <div class="stat-label">Мощность, МВт</div>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-industry"></i>
                            </div>
                            <div class="stat-info">
                                <div class="stat-value" id="units-count">—</div>
                                <div class="stat-label">Энергоблоков</div>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-flag"></i>
                            </div>
                            <div class="stat-info">
                                <div class="stat-value" id="panel-country">—</div>
                                <div class="stat-label">Страна</div>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-calendar-alt"></i>
                            </div>
                            <div class="stat-info">
                                <div class="stat-value" id="panel-year">—</div>
                                <div class="stat-label">Год пуска</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="info-section">
                        <h3><i class="fas fa-info-circle"></i> О станции</h3>
                        <div class="description-text" id="overview-description">
                            Выберите атомную электростанцию на карте для просмотра подробной информации.
                        </div>
                    </div>
                    
                    <div class="info-section">
                        <h3><i class="fas fa-map-marker-alt"></i> Местоположение</h3>
                        <div class="location-info">
                            <i class="fas fa-city"></i>
                            <span id="location-text">—</span>
                        </div>
                    </div>
                </div>
                
                <!-- Вкладка Энергоблоки -->
                <div class="tab-content" id="units-tab">
                    <div class="units-header">
                        <h3>Энергоблоки станции</h3>
                        <div class="units-summary">
                            Всего: <span id="total-units">0</span>, Работает: <span id="operational-units">0</span>
                        </div>
                    </div>
                    <div class="units-list" id="units-list">
                        <!-- Список энергоблоков -->
                    </div>
                </div>
                
                <!-- Вкладка История -->
                <div class="tab-content" id="history-tab">
                    <h3><i class="fas fa-history"></i> История станции</h3>
                    <div class="timeline" id="history-timeline">
                        <!-- Хронология -->
                    </div>
                </div>
                
                <!-- Вкладка Факты -->
                <div class="tab-content" id="facts-tab">
                    <h3><i class="fas fa-star"></i> Интересные факты</h3>
                    <div class="facts-list" id="facts-list">
                        <!-- Факты -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="data.js"></script>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="app.js"></script>
</body>
</html>

<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>МИР АЭС | Карта атомных электростанций</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap" rel="stylesheet">
</head>
<body class="dark-theme">
    <!-- Шапка -->
    <header class="header">
        <div class="header-mobile-top">
            <div class="brand-section">
                <div class="logo-container">
                    <div class="atom-logo">
                        <div class="atom-core"></div>
                        <div class="electron electron-1"></div>
                        <div class="electron electron-2"></div>
                        <div class="electron electron-3"></div>
                    </div>
                </div>
                <h1 class="brand-title">МИР АЭС</h1>
            </div>
            
            <div class="mobile-controls">
                <button class="mobile-btn" id="mobile-search-btn">
                    <i class="fas fa-search"></i>
                </button>
                <button class="mobile-btn" id="mobile-menu-btn">
                    <i class="fas fa-bars"></i>
                </button>
            </div>
        </div>
        
        <!-- Поиск для мобильных -->
        <div class="mobile-search-container" id="mobile-search-container">
            <div class="search-box">
                <i class="fas fa-search"></i>
                <input type="text" id="station-search" placeholder="Поиск АЭС...">
                <div class="search-results" id="search-results"></div>
            </div>
            <button class="close-search" id="close-search">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <!-- Навигация -->
        <div class="nav-buttons">
            <button class="nav-btn active" id="map-mode">
                <i class="fas fa-map"></i>
                <span>КАРТА</span>
            </button>
            <button class="nav-btn" id="stats-mode">
                <i class="fas fa-chart-bar"></i>
                <span>СТАТИСТИКА</span>
            </button>
        </div>
        
        <!-- Десктопные элементы -->
        <div class="desktop-controls">
            <div class="search-container desktop-only">
                <div class="search-box">
                    <i class="fas fa-search"></i>
                    <input type="text" id="desktop-search" placeholder="Поиск АЭС...">
                    <div class="search-results" id="desktop-search-results"></div>
                </div>
            </div>
            
            <a href="https://t.me/WorldNPP" target="_blank" class="telegram-btn desktop-only">
                <i class="fab fa-telegram"></i>
            </a>
            
            <div class="vfd-clock desktop-only">
                <div class="digit-container">
                    <span class="hours">00</span>
                    <span class="clock-colon">:</span>
                    <span class="minutes">00</span>
                </div>
                <div class="clock-label" id="current-date">--/--/----</div>
            </div>
            
            <div class="map-controls desktop-only">
                <button class="control-btn active" id="street-layer">
                    <i class="fas fa-map"></i>
                </button>
                <button class="control-btn" id="satellite-layer">
                    <i class="fas fa-satellite"></i>
                </button>
                <button class="control-btn" id="theme-toggle">
                    <i class="fas fa-moon"></i>
                </button>
            </div>
        </div>
    </header>

    <!-- Основное меню для мобильных -->
    <div class="mobile-menu" id="mobile-menu">
        <div class="menu-header">
            <h3>Меню</h3>
            <button class="close-menu" id="close-menu">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <div class="menu-items">
            <a href="https://t.me/WorldNPP" target="_blank" class="menu-item">
                <i class="fab fa-telegram"></i>
                <span>Telegram канал</span>
            </a>
            
            <button class="menu-item" id="mobile-filters-btn">
                <i class="fas fa-filter"></i>
                <span>Фильтры</span>
            </button>
            
            <button class="menu-item" id="mobile-layers-btn">
                <i class="fas fa-layer-group"></i>
                <span>Слои карты</span>
            </button>
            
            <div class="menu-item clock-item">
                <i class="fas fa-clock"></i>
                <div class="mobile-clock">
                    <span id="mobile-time">00:00</span>
                    <span id="mobile-date">--/--/----</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Панель фильтров -->
    <div class="filters-panel" id="filters-panel">
        <div class="filters-header">
            <h3><i class="fas fa-filter"></i> Фильтры</h3>
            <button class="close-filters" id="close-filters">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <div class="filters-content">
            <div class="filter-section">
                <div class="filter-title">СТРАНЫ</div>
                <div class="filter-options" id="country-filters">
                    <!-- Фильтры по странам будут добавлены через JS -->
                </div>
            </div>
            
            <div class="filter-section">
                <div class="filter-title">СТАТУС АЭС</div>
                <div class="filter-options" id="status-filters">
                    <!-- Фильтры по статусу будут добавлены через JS -->
                </div>
            </div>
            
            <div class="filter-section">
                <div class="filter-title">ТИП РЕАКТОРА</div>
                <div class="filter-options" id="type-filters">
                    <!-- Фильтры по типу реактора будут добавлены через JS -->
                </div>
            </div>
        </div>
        
        <div class="filters-footer">
            <button class="filter-btn secondary" id="reset-filters">
                СБРОСИТЬ
            </button>
            <button class="filter-btn primary" id="apply-filters">
                ПРИМЕНИТЬ
            </button>
        </div>
    </div>

    <!-- Карта -->
    <div class="map-container" id="map-container">
        <div id="map"></div>
    </div>

    <!-- Легенда для мобильных -->
    <div class="mobile-legend" id="mobile-legend">
        <div class="legend-items">
            <div class="legend-item">
                <div class="legend-color operational"></div>
                <span>Работает</span>
            </div>
            <div class="legend-item">
                <div class="legend-color stopped"></div>
                <span>Остановлен</span>
            </div>
            <div class="legend-item">
                <div class="legend-color construction"></div>
                <span>Строится</span>
            </div>
            <div class="legend-item">
                <div class="legend-color closed"></div>
                <span>Закрыт</span>
            </div>
        </div>
    </div>

    <!-- Выдвижная панель информации -->
    <div class="sidepanel" id="sidepanel">
        <div class="panel-header">
            <div class="panel-header-content">
                <h2 class="station-title" id="panel-station-name">Выберите АЭС</h2>
                <div class="status-badge" id="panel-status-badge">—</div>
            </div>
            <button class="close-panel" id="close-panel">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <div class="tabs">
            <button class="tab active" data-tab="overview">
                <i class="fas fa-info-circle"></i>
                <span>Обзор</span>
            </button>
            <button class="tab" data-tab="units">
                <i class="fas fa-bolt"></i>
                <span>Блоки</span>
            </button>
            <button class="tab" data-tab="history">
                <i class="fas fa-history"></i>
                <span>История</span>
            </button>
        </div>
        
        <div class="tab-content">
            <div class="tab-pane active" id="overview-tab">
                <div class="stats-grid">
                    <div class="stat-card">
                        <i class="fas fa-bolt"></i>
                        <div class="stat-value" id="total-capacity">—</div>
                        <div class="stat-label">Мощность</div>
                    </div>
                    <div class="stat-card">
                        <i class="fas fa-industry"></i>
                        <div class="stat-value" id="units-count">—</div>
                        <div class="stat-label">Блоки</div>
                    </div>
                    <div class="stat-card">
                        <i class="fas fa-flag"></i>
                        <div class="stat-value" id="panel-country">—</div>
                        <div class="stat-label">Страна</div>
                    </div>
                    <div class="stat-card">
                        <i class="fas fa-calendar-alt"></i>
                        <div class="stat-value" id="panel-year">—</div>
                        <div class="stat-label">Год пуска</div>
                    </div>
                </div>
                
                <div class="info-section">
                    <h3><i class="fas fa-info-circle"></i> Описание</h3>
                    <div class="overview-description" id="overview-description">
                        Выберите АЭС на карте для просмотра информации
                    </div>
                </div>
                
                <div class="info-section">
                    <h3><i class="fas fa-map-marker-alt"></i> Местоположение</h3>
                    <div class="location-info">
                        <i class="fas fa-city"></i>
                        <span id="location-text">—</span>
                    </div>
                </div>
            </div>
            
            <div class="tab-pane" id="units-tab">
                <div class="units-header">
                    <h3>Энергоблоки</h3>
                    <div class="units-summary">
                        Всего: <span id="total-units">0</span>, Работает: <span id="operational-units">0</span>
                    </div>
                </div>
                <div class="units-list" id="units-list">
                    <!-- Список энергоблоков -->
                </div>
            </div>
            
            <div class="tab-pane" id="history-tab">
                <h3><i class="fas fa-history"></i> История станции</h3>
                <div class="timeline" id="history-timeline">
                    <!-- Хронология -->
                </div>
            </div>
        </div>
    </div>

    <!-- Модальные окна для слоев -->
    <div class="modal" id="layers-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Слои карты</h3>
                <button class="close-modal" data-modal="layers">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <button class="layer-btn active" data-layer="street">
                    <i class="fas fa-map"></i>
                    <span>Схема</span>
                </button>
                <button class="layer-btn" data-layer="satellite">
                    <i class="fas fa-satellite"></i>
                    <span>Спутник</span>
                </button>
                <button class="layer-btn" id="toggle-theme-btn">
                    <i class="fas fa-moon"></i>
                    <span>Тёмная тема</span>
                </button>
            </div>
        </div>
    </div>

    <script src="data.js"></script>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="app.js"></script>
</body>
</html>
